EMPATHY FRAMEWORK - DEPENDENCY AUDIT SUMMARY
Generated: 2025-11-07
Product: Commercial Python Framework ($99/developer/year)
Version: 1.5.0

=============================================================================
EXECUTIVE SUMMARY
=============================================================================

Overall Status: MEDIUM RISK (commercially viable but needs fixes)
- License Compliance: âœ… PASS (all commercially safe)
- Security: âœ… PASS (no known CVEs)
- Completeness: âŒ FAIL (missing dependencies)
- Version Management: âŒ FAIL (no upper bounds)

Time to Fix: 4-6 hours
Estimated Impact: HIGH (affects customer installation experience)

=============================================================================
KEY FINDINGS
=============================================================================

1. MISSING DEPENDENCIES (Critical - P0)
   Missing from setup.py but used in code:
   - langgraph (used in agents/)
   - fastapi (used in backend/)
   - uvicorn (used in backend/)
   - pygls, lsprotocol (used in examples/)
   - python-docx (used in docs/)

   Impact: Customer runs `pip install empathy-framework` â†’ ImportError
   Fix Time: 1 hour

2. NO UPPER VERSION BOUNDS (Critical - P0)
   Current: pydantic>=2.0.0 (could install pydantic 10.0.0 and break)
   Should be: pydantic>=2.0.0,<3.0.0
   
   Affects ALL 7 core dependencies
   Impact: Framework works today, breaks tomorrow after pip update
   Fix Time: 1 hour

3. LLM PROVIDERS SHOULD BE OPTIONAL (Important - P1)
   Current: anthropic and openai in install_requires (always installed)
   Should be: extras_require (user chooses which LLM)
   
   Impact: Users forced to install both Claude SDK and OpenAI SDK
   Fix Time: 30 minutes

4. LANGCHAIN SHOULD BE OPTIONAL (Important - P1)
   Current: langchain in install_requires
   Used in: Only 2 files in agents/ (not core framework)
   
   Impact: 99% of users don't need langchain but must install it
   Fix Time: 30 minutes

=============================================================================
LICENSE ANALYSIS
=============================================================================

All Dependencies: MIT, Apache-2.0, BSD-3-Clause, PSF-2.0
Commercial Use: âœ… ALLOWED for all dependencies
GPL/AGPL: âœ… NONE found (would block commercial use)

Required Attribution:
- Include dependency licenses in docs âœ… (covered by Apache 2.0 license)
- No additional obligations

Verdict: SAFE for commercial distribution ($99/year product)

=============================================================================
SECURITY ANALYSIS
=============================================================================

Known CVEs: None in declared dependencies
Unmaintained Packages: None (all updated in 2024)
Security Advisories: None

Recommendations:
1. Add safety checks to CI/CD
2. Monitor Dependabot alerts
3. Quarterly dependency review
4. Patch critical CVEs within 48 hours

=============================================================================
RECOMMENDED FIXES (Priority Order)
=============================================================================

Priority 1 (2 hours - CRITICAL for commercial release):
1. Add missing dependencies to setup.py
   - langgraph to extras_require['agents']
   - fastapi, uvicorn to extras_require['backend']

2. Add upper version bounds to ALL dependencies
   - pydantic>=2.0.0,<3.0.0
   - anthropic>=0.8.0,<1.0.0
   - openai>=1.6.0,<2.0.0
   - All others

3. Move optional deps to extras_require
   - Move anthropic, openai to extras_require
   - Move langchain to extras_require
   - Keep only pydantic, typing-extensions, python-dotenv in core

Priority 2 (1 hour - Important for customer experience):
4. Update README with installation instructions
   - Document optional extras
   - Show examples: pip install empathy-framework[anthropic]
   - Explain which extras are needed for what

5. Update Python version requirement
   - Change from >=3.9 to >=3.10
   - Reason: Python 3.9 EOL in Oct 2025 (6 months away)

Priority 3 (2 hours - Testing and validation):
6. Test minimal installation
   - Test: pip install empathy-framework (no extras)
   - Verify core works without LLM providers
   - Ensure graceful failure messages

7. Add dependency monitoring
   - Add safety to dev dependencies
   - Configure Dependabot
   - Document update policy

=============================================================================
INSTALLATION TESTING REQUIRED
=============================================================================

Before commercial release, test these scenarios:

1. Minimal install:
   pip install empathy-framework
   â†’ Should work for basic framework usage

2. With Anthropic:
   pip install empathy-framework[anthropic]
   â†’ Should enable Claude integration

3. With backend API:
   pip install empathy-framework[backend,openai]
   â†’ Should start FastAPI server

4. With all features:
   pip install empathy-framework[all]
   â†’ Should enable everything

5. Fresh environment test:
   python3.10 -m venv test_env
   pip install empathy-framework
   â†’ Verify clean install works

=============================================================================
RISK ASSESSMENT
=============================================================================

Commercial Viability: âœ… YES (no legal blockers)
Can Ship Today: âš ï¸  YES, but with customer friction risk
Should Fix Before v2.0: âœ… YES (critical for scaling)

Risks if shipped as-is:
- Customers get ImportError (missing backend deps)
- Future pip updates break customers (no upper bounds)
- Unnecessary large installs (forced langchain/both LLMs)
- Support burden (confusion about what's installed)

Benefits of fixes:
- Clean minimal install (faster, smaller)
- User choice (install only what they need)
- Version stability (upper bounds prevent breakage)
- Better customer experience (clear documentation)

=============================================================================
RECOMMENDED setup.py STRUCTURE
=============================================================================

Core dependencies (always installed):
- pydantic>=2.0.0,<3.0.0
- typing-extensions>=4.0.0,<5.0.0
- python-dotenv>=1.0.0,<2.0.0

Optional extras (user chooses):
- [anthropic]: Claude SDK
- [openai]: GPT SDK
- [agents]: LangChain + LangGraph
- [backend]: FastAPI + uvicorn
- [all]: Everything

This gives users flexibility:
- Minimal user: pip install empathy-framework (15MB)
- Claude user: pip install empathy-framework[anthropic] (20MB)
- Full user: pip install empathy-framework[all] (50MB)

=============================================================================
TRANSITIVE DEPENDENCIES
=============================================================================

Discovered (auto-installed by pip):
- langchain-anthropic, langchain-openai (from langchain)
- pydantic_core (from pydantic)
- starlette (from fastapi)

Note: Don't explicitly declare transitive deps - let pip resolve

=============================================================================
COMPARISON: Current vs Recommended
=============================================================================

CURRENT setup.py:
install_requires=[
    "pydantic>=2.0.0",           # No upper bound!
    "anthropic>=0.8.0",          # Should be optional
    "openai>=1.6.0",             # Should be optional
    "langchain>=0.1.0",          # Should be optional
]

RECOMMENDED setup.py:
install_requires=[
    "pydantic>=2.0.0,<3.0.0",
    "typing-extensions>=4.0.0,<5.0.0",
    "python-dotenv>=1.0.0,<2.0.0",
]
extras_require={
    "anthropic": ["anthropic>=0.8.0,<1.0.0"],
    "openai": ["openai>=1.6.0,<2.0.0"],
    "agents": ["langchain>=0.1.0,<0.2.0", "langgraph>=0.1.0,<0.2.0"],
    "backend": ["fastapi>=0.100.0,<1.0.0", "uvicorn>=0.20.0,<1.0.0"],
}

=============================================================================
CONCLUSION
=============================================================================

The Empathy Framework is COMMERCIALLY SAFE with no licensing or security
issues. However, the dependency management needs refinement before scaling:

âœ… Safe to ship (no legal/security blockers)
âš ï¸  Should fix before v2.0 (customer experience)
ðŸš¨ Must fix before scaling (prevent support burden)

Recommended Action: Implement Priority 1 fixes (2 hours) before release.

Full details: See DEPENDENCY_AUDIT.md (730 lines)
